# 1. 计算机网络和因特网
## 1.1 什么是因特网
### 1.1.1 具体构成描述
* 主机、端系统
* 通信链路：电缆、铜线、光纤和无线电频谱
* 分组交换机：路由器（用于网络核心）、链路层交换机（用于接入网中）
* 网络服务提供商ISP：低层ISP通过高层ISP互联起来
* 协议：TCP、IP

### 1.1.2 服务描述
* 分布式应用程序：设计多台相互交换数据的端系统，应用程序运行在端系统上而不是分组交换机中

### 1.1.3 协议
一个协议定义了在两个或多个通信实体之间交换的报文格式和次序，以及报文发送和接收一条报文或其他事件所采取的的行动

## 1.2 网络边缘
主机：客户端、服务器
### 1.2.1 接入网
指将主机连接到其边缘路由器的物理链路，边缘路由器这是主机到任何其他远程主机的路径上的第一台路由器
#### 1.2.1.1 数字用户线DSL
住户从本地电话公司处获得DSL网络接入，每个用户的DSL调制解调器使用现有的**电话线**与位于本地电话公司的数字用户线接入复用器来交换数据。家庭电话线同时承载了数据和传统的电话信号。
由于上传速度与下载速度不同，因此该种接入方式被称为不对称的

#### 1.2.1.2 电缆网络接入
利用**有线电视**公司现有的有线电视基础设施

### 1.2.2 以太网和WiFi

## 1.3 网路核心
### 1.3.1 分组交换
为了从源端系统向目的端系统发送一个message，源将长message划分为较小的数据块，称之为packet。每个packet都通过通信链路和分组交换机传送。
设经过一条链路发送一个L比特的packet，链路的传输速率为R比特每秒，则传输所需时间为$ \frac{L}{R} $

#### 1.3.1.1 存储转发传输
交换机在能够开始向输出链路传输该分组的第一个比特之前，必须接收到整个packet
* P个packet经过N条链路序列的时延是$$ \frac{NL}{R}+\frac{(P-1)L}{R}=\frac{(N+P-1)L}{R} $$

#### 1.3.1.2 排队时延和packet丢失
交换机中有一个输出缓存，用于存储准备发送的packet。因此packet还要承受输出缓存的排队时延，这取决于网络的拥塞程度。当队列已满时，就会发生packet丢失。

#### 1.3.1.3 转发表和路由选择协议
转发表将IP地址映射为输出链路

### 1.3.2 电路交换
在主机通信会话期间，预留了主机间通信沿路径所需要的资源（缓存、链路传输速率）
#### 1.3.2.1 电路交换中的复用
频分复用、时分复用
#### 1.3.2.2 分组交换与电路交换的对比
分组交换：不适合实时服务，因为其端到端的延时是可变且不可预测的。但是它提供了比电路交换更好的带宽共享，且比电路交换更简单，更有效，实现成本更低

### 1.3.3 网络的网络
现今的互联网由数十个第一层ISP和数十万个较低层ISP组成。ISP覆盖的区域有所不同。较低层的ISP与较高层的ISP相连，较高层的ISP彼此互联。用户和内容提供商是较低层ISP的客户，较低层ISP是较高层ISP的客户

## 1.4 分组交换网中的时延、丢包和吞吐量
### 1.4.1 分组交换网中的时延概述
* 处理时延：检查packet首部和决定将该packet导向何处所需要的时间是处理时延的一部分
* 排队时延：packet在链路上等待传输时消耗的时间
* 传输时延$ \frac{L}{R} $：将所有packet的比特传输向链路所需的时间
* 传播时延$ \frac{distance}{speed} $：信号在物理媒体上传输需要的时间
**注意**：传输时延是packet长度和链路传输速率的函数，与两台路由器之间的距离无关；传播时延是两台路由器之间距离和传播速率的函数

### 1.4.2 排队时延和丢包
设所有packet都是由L比特组成的，packet的平均到达速率是a，传输速率是R，则定义流量强度$ \frac{La}{R} $
当队列满时将会出现丢包现象

### 1.4.3 端到端时延
#### 1.4.3.1 Traceroute
假设源于目的地之间有N-1个路由器。则源向网络方式N个packet，每个packet的地址都指向最终的目的地。当第n台路由器接收到第n个packet时，该路由器向源回送一个message。源记录了从它发送一个packet到接收到对应返回message所经受的时间，同时记录了路由器的名称与地址。

### 1.4.4 计算机网络中的吞吐量
吞吐量取决于瓶颈链路的传输速率$ min{R1,R2,,,,,Rn} $，也就是源到目的地之间路径的最小传输速率

## 1.5 协议层次及其服务模型
### 1.5.1 协议分层
#### 1.5.1.1 应用层
* 应用层是网络应用程序及其它们的应用层协议存留的地方。包括许多协议：HTTP、SMTP、FTP
* 位于应用层的信息packet称为message
#### 1.5.1.2 运输层
运输层在应用程序端点之间传送message。有两个运输协议：TCP和UDP。
TCP提供连接服务，并提供拥塞控制机制
UDP没有连接也没有流量控制
* 位于运输层的packet称为segment
#### 1.5.1.3 网络层
所有具有网络层的网络组建必须运行IP协议
* 位于网络层的packet称为datagram
#### 1.5.1.4 链路层
网络层将datagram下传给链路层，链路层沿着路径将datagram传递给下一个结点，在下一个结点，链路层将datagram上传到网络层
* 位于链路层的packet称为frame
#### 1.5.1.5 物理层
物理层的人物是将一个一个bit从一个结点移动到下一个结点。与实际传输媒体相关

### 1.5.2 OSI模型
分为应用层、表示层、会话层、运输层、网络层、链路层、物理层
* 表示层的作用是使通信的应用程序能够解释交换数据的含义（数据压缩、数据加密、数据描述）
* 会话层提供了数据交换定界和同步功能，包括建立检查点和恢复方案的方法


## 1.6 面对网络的攻击
### 1.6.1  通过互联网将有害程序植入电脑
### 1.6.2 攻击服务器和网络基础设施
拒绝服务攻击：
1. 弱点攻击
2. 宽带泛洪：短时间向攻击目标发送大量packet
3. 连接泛洪：在目标主机中创建大量的半开或全开的TCP连接
### 1.6.3 packet嗅探
### 1.6.4 使用虚假IP地址

